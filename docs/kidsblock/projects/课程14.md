

# 第14课 红外遥控智能车

## （1）项目介绍：

前面的学习中我们详细的介绍了智能车上各个传感器、模块、扩展板的使用方法。在这里我们可以再结合前面课程中知识制作一个红外控制智能车。在传感器项目第四课中，我们已经测试出红外遥控器各个按键对应的键值。实验中，我们可以通过代码设置（键值），让对应的按键控制智能车对应的运动状态，且相应的状态模式显示在8X16 LED矩阵上。

## （2）流程图：

循迹智能车具体逻辑如下表格：









|按键：![](../../media/b11dc5ffa6cccebc6088e5d557d76daf.png)|键值：16736925|状态：前进|
|-|-|-|
|按键：![](../../media/ae8110034aacb083151cfd882ee599ba.png)|键值：16754775|状态：后退|
|按键：![](../../media/bce9cba2c6d2465fbcce570ad4210eba.png)|键值：16720605|状态：左转|
|按键：![](../../media/ad907a618af86f30d52986bbbd57ba76.png)|键值：16761405|状态：右转|
|按键：![](../../media/9716a4ed61a4064d2f47a7b73eccaf87.png)|键值：16712445|状态：停止|




按照前面思路设计好智能车后，我们就需要按照设计思路开始制作智能车。我们需要设计对应的接线，测试代码，然后接线上传代码，运行，确保智能车能够实现理想中的功能。

## （3）接线图：电机+红外接收模块

接线注意：由于红外接收传感器输入的数字信号，将红外接收传感器模块用导线连接到电机驱动扩展板上的G、V、A1
; A、B两组电机分别对应的连接到堆叠在UNO Plus板上的电机驱动扩展板上的接口A和接口B，电源接到BAT接口。

![](../../media/7de2ae940fad36b068a76c18863df18d.png)

## （4）测试代码：

添加红外传感器

![](../../media/84f0662480ab8adc3747c316d6c15913.png)

在事件栏拖出Arduino启动模块

![](../../media/f88cf53957eaf0dd29cced5ff168ac49.png)

在红外栏拖出舒适化红外接收模块，设置引脚为A1

![](../../media/569e760baf4a12a22b91f274c39a772c.png)

初始化点阵

![](../../media/442de4e6a2018730e5def8a02e4c1343.png)

在控制栏拖出重复执行模块

![](../../media/6893a6abb13ad4b3cf3b2bbf7cd72f57.png)

在控制栏拖出判断模块，判断是否有接收到红外遥控的数据

![](../../media/2d0703c18d2932e956dd6f3c80618299.png)

在控制栏拖出判断模块，并判断“读取红外数据”是否等于“16736925”如果是则执行小车前进代码，点阵显示前进箭头

![](../../media/757089c24515316333fd9c6a9cb06c21.png)

在控制栏拖出判断模块，并判断“读取红外数据”是否等于“16754775”如果是则执行小车后退代码，点阵显示后退箭头

![](../../media/3c57373e721c9453a691775b5e26aa05.png)

在控制栏拖出判断模块，并判断“读取红外数据”是否等于“16720605”如果是则执行小车左转代码，点阵显示左转箭头（由于左右箭头的代码块是按照点阵面向自己的方向做的，所以左右箭头在指示小车状态的时候刚好相反）

![](../../media/91ba3bc1adf905d8b8a41be34b625f8c.png)

在控制栏拖出判断模块，并判断“读取红外数据”是否等于“16761405”如果是则执行小车右转代码，点阵显示右转箭头（由于左右箭头的代码块是按照点阵面向自己的方向做的，所以左右箭头在指示小车状态的时候刚好相反）

![](../../media/3fab11e873afba59e10ea16d86bd1437.png)

在控制栏拖出判断模块，并判断“读取红外数据”是否等于“16712445”如果是则执行小车停止代码，点阵显示“STOP”

![](../../media/2c474edaee1fb692fd64e03c9588ccfb.png)

在红外栏拖出刷新红外接收数据

![](../../media/375490d2b436310abbc5dac95f2c0c66.png)

（注意：在上传测试代码前，需要把蓝牙模块取下，否则测试代码会上传失败。需要上传代码成功后，再连接蓝牙模块。）

![](../../media/677e71f05d0af1381de7da583fcef983.png)![](../../media/9bea88673f8d0b32e866fe4ef63b8671.png)![](../../media/a2853bf67913e594db2379c6ce53ada1.png)

## （5）测试结果：

将驱动扩展板堆叠在UNO Plus板上，上传好代码，按照接线图接线，将拨码开关拨至ON端后，我们就能用红外遥控控制智能车运动了。


