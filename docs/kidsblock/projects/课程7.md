

# 第7课 蓝牙控制

![](../../media/3920253c86188ac64cf9b82c0df6c941.png)

## （1）项目介绍：

蓝牙是近几十年来最流行的一种简单的无线通信模块，易于使用，已在大多数电池供电的设备中使用。蓝牙标准进行了许多升级，以不断满足客户和技术的需求。几年来，发生了许多变化，包括数据传输速率，可穿戴设备和IoT设备以及安全系统的功耗。

在这里，我们将学习DX-BT24。 DX-BT24是一种随时可用的蓝牙模块。
该模块用于建立无线数据通信。

## （2）蓝牙参数：

蓝牙协议：Bluetooth Specification V5.1 BLE

工作距离：在开放环境中，实现50-100m超远距离通讯

工作频率：2.4GHz ISM频段

通信接口：UART

蓝牙认证：符合FCC CE ROHS REACH认证标准

FLASH：1M

串口参数：9600、8数据位、1停止位、无效位、无流控

电源：5V DC

工作温度：–5至+65摄氏度

## （3）项目组件：










|keyes PLUS 开发板*1|Keyes brick L298P 电机驱动扩展板V1*1|keyes 草帽LED白发红模块*1|DX-BT24蓝牙模块|
|-|-|-|-|
|![](../../media/d9ad1b030b310a80066f8fb541f65f96.png)|![](../../media/3dca1bdd1d1420c1d12b16cbf52fee00.png)|![](../../media/31fb938502d3d519813c391569d6a3f3.png)|![](../../media/fe69441b03f45602cceab458e51ef8e2.png)|
|3Pin 双母头杜邦线*1|USB线*1|18650双节电池盒*1|18650电池*2 （电池自配）|
|![](../../media/07752ebfc8e8af62f1b86c4a725ea284.jpg)|![](../../media/260c62fe8edae84c7a302160a3667ce5.png)|![](../../media/c5bf59a8e5cdded95c02334369ab6fdd.png)|




## （4）接线图：

![](../../media/99fab40965f356da3cf658aed24556bc.png)

蓝牙是直接插在电机驱动扩展板上的，注意一下方向，而且在上传代码之前不要插上蓝牙

## （5）安装蓝牙APP测试：

1.  在例程文件夹路径下找到名为APP的文件夹![](../../media/52692425d98d8b31552d145e70ff5a43.png)，将里面的安装包发送到手机并安装

2.  安装成功，显示图标如下。

![](../../media/0dc8eed11ca040e54e9bbf0f38da4f2f.png)

2.点击上图图标，进入APP，显示如下图。

![](../../media/038f51f540d20d0711b794b0fada0789.jpg)

3.上传代码成功后，连接蓝牙，上电后，蓝牙模块上LED闪烁。点击APP左上角的![](../../media/7fdbb0d28b66d7e6508d4f47f2b74351.png)图标，搜索到蓝牙，显示如下图。

![](../../media/e4b0b0c791cc11c3299eedfff0d7c697.jpg)

4.点击BT24连接，蓝牙连接成功，显示如下图，蓝牙模块上LED变为常亮。

![](../../media/0b7ff74afb5b01625035d5f26597a358.jpg)

## （6）项目代码：

在事件栏拖出Arduino启动

![](../../media/8b5eb8fe0ce0a54d47726e3afad21815.png)

在串口栏拖出设置串口波特率模块，设置波特率为9600

![](../../media/b2676f0d6687651b5998d1ed98c3ef84.png)

在控制栏拖出重复执行模块

![](../../media/7970a54f8875c423a696ecdca0f2772d.png)

在控制栏拖出判断模块

![](../../media/c5b4f649d7011e812bd65ead55b7e32d.png)

在算数栏拖出大于模块，并在串口栏拖出拖出串口可读取字节数模块，设置串口可读取字节数大于0

![](../../media/2d95c801dda538d6cb8040f2acb35338.png)

在串口栏拖出串口打印模块，并添加串口读取数据在串口打印模块里

![](../../media/937496e1034588ac0c7f46006a57506e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*完整的代码如下\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](../../media/082131357bad7e9a30cf6d7331c445b2.png)

（上传代码之前不要连接蓝牙模块，因为代码的上传也是用的串口通信，跟蓝牙的串口通信会有冲突，导致代码上传不成功）

上传代码到开发板，然后再插上蓝牙模块，等待手机发出的指令。

这是读取到abcABC的ASCII码值

![](../../media/ec85c82dfaf4e939f0c82eef683236ea.png)

ASCII码对照表：

![](../../media/1a07a9bdabb77822c8d41071a0659ebc.png)

## （7）项目拓展：

上面的项目，我们讲解了蓝牙接收到手机发送的信号并且在开发板的串口显示出来，比如我们按下![](../../media/47e53c818fc1832b63f8ade8320f64ba.png)，然后我们就会接收到‘B’，当我们松开的时候又接收到‘S’。那接下来我们就要想一下了，我们可以利用接收到的信号去做一些事情吗，答案是肯定的，我们这里就利用手机发送的命令去打开或者关闭一个LED灯。看接线图，在D9脚接了一个LED。

![](../../media/d9f6429c64e1929ec1df181e33082bb7.png)

代码：

![](../../media/254fc980ffbb0ad6adf7a14060d110ae.png)

上传代码完成后，点击手机APP上![](../../media/47e53c818fc1832b63f8ade8320f64ba.png)以控制LED。当您按下发送\`\`B''时，LED将打开，而当您松开发送\`\`S''时，LED将关闭。



