

# 第16课 蓝牙调速智能车

## （1）项目介绍：

前面课程中，我们利用蓝牙控制智能车，在这课程中我们做一个蓝牙可以控制速度的智能车。既然要控制智能车速度，我们可以将速度定义一个变量speeds来表示。项目中我们只要改变这是变量speeds就可以改变智能车的速度啦。下面让我们通过代码来实现。

## （2）流程图：

按照前面思路设计好智能车后，我们就需要按照设计思路开始制作智能车。我们需要设计对应的接线，测试代码，然后接线上传代码，运行，确保智能车能够实现理想中的功能。

## （3）接线图：蓝牙+电机

![](../../media/2a6aab2b8fe9df074b546e3f513b9556.png)

接线跟上一课一样

## （4）测试代码：

在事件栏拖出Arduino启动模块

![](../../media/c7800df722e2941b48169c9bfdfe717d.png)

在串口栏拖出设置串口波特率为9600

![](../../media/3dece0a3aee5a541ed13fc3b5143b8c3.png)

在变量类型栏拖出声明全局变量，整形，变量名为bluetooth_val，赋值0

![](../../media/d1e19335208d22ef846dbcdec6d95a64.png)

在变量类型栏拖出声明全局变量，整形，变量名为speeds，赋值150

![](../../media/d0e2002657753e9034afcae5de59c08b.png)

初始化点阵

![](../../media/efb62d161425f0711a27275331078c2d.png)

在控制栏拖出重复执行模块

![](../../media/3edcdbbed1c4d1b6150c2784f1582b93.png)

在控制栏拖出判断模块，判断可读取字节数大于0

![](../../media/29eca93f33886da4fd95e16a31ef6a39.png)

将串口读取数字赋给bluetooth_val

![](../../media/3a63df099fec399b5ab5c6956c02ef17.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“70”如果是则执行前进代码(PWM值使用变量“speeds”代替)，点阵显示前进箭头

![](../../media/db40dd794935d226263f002fb1fcccf0.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“66”如果是则执行后退代码(PWM值使用变量“speeds”代替)，点阵显示后退箭头

![](../../media/84becd456d7d41158b7746b4a87a5290.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“76”如果是则执行左转代码(PWM值使用变量“speeds”代替)，点阵显示左转箭头

![](../../media/ef7c92a9ea7e87e0c60f5f1485328b19.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“82”如果是则执行右转代码(PWM值使用变量“speeds”代替)，点阵显示右转箭头

![](../../media/0d4a0d20c675190bdfa69a491026bf9c.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“97”如果是则执行加速代码，点阵显示笑脸“^\_^”

![](../../media/5c59f34b5603c17d1733934bc847b81d.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“100”如果是则执行减速代码，点阵显示苦脸“\>\_\<”

![](../../media/eb417df98df634e05af69fbb68fa6bd3.png)

在控制栏拖出判断语句，判断“Bluetooth_val”是否等于“83”如果是则执行停止代码，点阵显示”STOP”

![](../../media/cf61b129fb36bc35880f4fb49182ce28.png)

完整代码：（注意上传代码的时候必须拔下蓝牙模块不然会上传不成功的，上传完在装回去）

![](../../media/1e7fe6346a300f5a8e02a92ce9d69f30.png)

![](../../media/8a293b10ebd0d602a1298369c65004a5.png)![](../../media/d60a7ae21c841301290107512adc7515.png)![](../../media/ae92aa722a4e3bd18abee1331bc454f6.png)

## （4）测试结果：

按下![](../../media/b2d6cb9c7c86786d8a5067ed7536dd31.png)按钮，小车加速；按下![](../../media/f70a0831084cf8578de1c3d256453480.png)按钮，小车减速.


